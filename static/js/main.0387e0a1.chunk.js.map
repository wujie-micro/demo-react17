{"version":3,"sources":["logo.svg","Dialog.js","Location.js","Communication.js","State.js","App.js","reportWebVitals.js","index.js"],"names":["Option","Select","Dialog","state","visible","showModal","setState","handleOk","e","handleCancel","console","log","content","className","onClick","this","title","onOk","onCancel","showSearch","style","width","placeholder","optionFilterProp","filterOption","input","option","props","children","toLowerCase","indexOf","value","trigger","React","Component","Location","window","__WUJIE","degrade","Proxy","CustomElementRegistry","$wujie","location","href","host","type","handleClick","Communication","jump","handleAlert","parent","alert","handleEmit","bus","$emit","count","Home","verticalAlign","color","open","App","basename","to","src","logo","alt","exact","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0387e0a1.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React from \"react\";\nimport Button from \"antd/es/button\";\nimport Modal from \"antd/es/modal\";\nimport Select from \"antd/es/select\";\nimport Popover from \"antd/es/popover\";\n\nconst Option = Select.Option;\n\nexport default class Dialog extends React.Component {\n  state = { visible: false };\n\n  showModal = () => {\n    this.setState({\n      visible: true,\n    });\n  };\n\n  handleOk = (e) => {\n    this.setState({\n      visible: false,\n    });\n  };\n\n  handleCancel = (e) => {\n    this.setState({\n      visible: false,\n    });\n  };\n\n  componentDidMount() {\n    console.log(\"react17 dialog mounted\")\n  }\n\n  render() {\n    const content = (\n      <div>\n        <div>Content</div>\n        <div>Content</div>\n      </div>\n    );\n    return (\n      <div>\n        <h2>弹窗处理</h2>\n        <div className=\"content\">\n          <p>弹窗无需子应用做任何处理就可使用</p>\n          <h3>1、打开antd弹窗</h3>\n          <p>\n            <Button onClick={this.showModal}>Open Modal</Button>\n          </p>\n          <Modal title=\"Basic Modal\" visible={this.state.visible} onOk={this.handleOk} onCancel={this.handleCancel}>\n            <div>Some contents...</div>\n            <div>Some contents...</div>\n            <div>Some contents...</div>\n          </Modal>\n          <h3>2、打开antd选择器</h3>\n          <div className=\"p\">\n            <Select\n              showSearch\n              style={{ width: 200 }}\n              placeholder=\"Select a person\"\n              optionFilterProp=\"children\"\n              filterOption={(input, option) => option.props.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}\n            >\n              <Option value=\"jack\">Jack</Option>\n              <Option value=\"lucy\">Lucy</Option>\n              <Option value=\"tom\">Tom</Option>\n            </Select>\n          </div>\n          <h3>3、打开antd气泡卡片</h3>\n          <div className=\"p\">\n            <Popover content={content} title=\"Title\" trigger=\"hover\">\n              <Button>Hover me</Button>\n            </Popover>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport Button from \"antd/es/button\";\n\nexport default class Location extends React.Component {\n  handleClick() {\n    if (window.__WUJIE?.degrade || !window.Proxy || !window.CustomElementRegistry) {\n      window.$wujie.location.href = \"https://xy.woa.com/xy/app/prod/portal/home\";\n    } else window.location.href = \"https://xy.woa.com/xy/app/prod/portal/home\";\n  }\n  \n  componentDidMount() {\n    console.log(\"react17 location mounted\")\n  }\n\n  render() {\n    return (\n      <div>\n        <h2>路由处理</h2>\n        <div className=\"content\">\n          <h3>1、路由同步</h3>\n          <p>路由同步意味着浏览器的刷新、前进、后退都可以作用到子应用上</p>\n          <p>子应用同步路由到主应用url的query参数上且 key值为子应用的name</p>\n          <h3>2、location劫持</h3>\n          <p>当用户访问location来获取当前的url时，wujie统一拦截并回填子应用正确的地址</p>\n          <h3>3、获取window.location.host的值</h3>\n          <p>{window.location.host}</p>\n          <h3>4、修改window.location.href</h3>\n          <div className=\"p\">\n            <Button type=\"warning\" onClick={this.handleClick}>\n              跳转无极\n            </Button>\n            <p>子应用修改location.href，会将当前的子应用的shadow删除并且替换成一个iframe</p>\n            <p>如果子应用配置路由同步，浏览器可通过回退回到子应用</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport Button from \"antd/es/button\";\n\nexport default class Communication extends React.Component {\n  jump = () => {\n    window.$wujie && window.$wujie.props.jump(\"vue3\");\n  };\n\n  handleAlert = () => {\n    window.parent && window.parent.alert(\"主应用alert\");\n  };\n\n  handleEmit = () => {\n    window.$wujie && window.$wujie.bus.$emit(\"click\", \"react17\");\n  };\n  render() {\n    return (\n      <div>\n        <h2>通信处理</h2>\n        <div className=\"content\">\n          <p>应用可以有三种方式进行通信</p>\n          <h3>1、主应用通过 props 属性注入的方法</h3>\n          <p>主应用通过 props 注入 jump（跳转页面）方法，子应用通过 $wujie.props.jump(xxx) 来使用</p>\n          <p>\n            <Button onClick={this.jump}>点击跳转vue3</Button>\n            <Button className=\"app-jump\" onClick={() => window?.$wujie.props.jump(\"angular12\")}>\n              跳转angular\n            </Button>\n          </p>\n          <h3>2、通过 window.parent 方法拿到主应用的全局方法</h3>\n          <p>子应用调用 window.parent.alert 来调用主应用的 alert方法</p>\n          <p>\n            <Button onClick={this.handleAlert}>显示alert</Button>\n          </p>\n          <h3>3、通过 bus 方法发送去中心化的事件</h3>\n          <p>主应用 bus.$on(\"click\", (msg) ={\">\"} window.alert(msg)) 监听子应用的 click 事件</p>\n          <p>子应用点击按钮 $wujie.bus.$emit('click', 'react17') 发送 click 事件</p>\n          <p>\n            <Button onClick={this.handleEmit}>显示alert</Button>\n          </p>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport Button from \"antd/es/button\";\nimport \"antd/es/button/style/css\";\n\nexport default class Location extends React.Component {\n  state = { count: 10 };\n  handleClick() {\n    window.location.href = \"https://xy.woa.com/xy/app/prod/portal/home\";\n  }\n\n  componentDidMount() {\n    console.log(\"react17 state mounted\")\n  }\n\n  render() {\n    return (\n      <div>\n        <h2>子应用保活</h2>\n        <div className=\"content\">\n          <p>设置保活模式，切换应用时，子应用的路由和state都可以得到保留</p>\n          <h3>1、改动实例的状态，切换到vue，点击按钮再回来看看</h3>\n          <p className=\"number-content\">\n            <Button onClick={() => this.setState((state) => ({ count: state.count - 1 }))}>-</Button>\n            <span className=\"number\">{this.state.count}</span>\n            <Button onClick={() => this.setState((state) => ({ count: state.count + 1 }))}>+</Button>\n            <Button\n              className=\"app-jump\"\n              onClick={() => {\n                window?.$wujie.bus.$emit(\"add\");\n                window?.$wujie.props.jump(\"vue3\");\n              }}\n            >\n              vue3 state+1 跳回\n            </Button>\n          </p>\n        </div>\n      </div>\n    );\n  }\n}\n","import logo from \"./logo.svg\";\nimport { BrowserRouter as Router, Switch, Route, NavLink, Redirect } from \"react-router-dom\";\nimport Dialog from \"./Dialog\";\nimport Location from \"./Location\";\nimport Communication from \"./Communication\";\nimport State from './State'\nimport Tag from \"antd/es/tag\";\nimport Button from \"antd/es/button\";\nimport \"antd/es/tag/style/css\";\nimport \"antd/es/button/style/css\";\nimport \"antd/es/modal/style/css\";\nimport \"antd/es/select/style/css\";\nimport \"antd/es/popover/style/css\";\n\nconst basename = process.env.NODE_ENV === \"production\" ? \"/demo-react17/\" : \"\";\n\nconst Home = () => (\n  <div>\n    <h2>react17示例</h2>\n    <p>\n      当前react版本{\" \"}\n      <Tag style={{ verticalAlign: \"text-top\" }} color=\"blue\">\n        17.0.2\n      </Tag>\n    </p>\n    <p>\n      当前antd版本{\" \"}\n      <Tag style={{ verticalAlign: \"text-top\" }} color=\"geekblue\">\n        4.18.3\n      </Tag>\n    </p>\n    <p>\n    <Button onClick={() => window.open(\"https://git.woa.com/wujie/wujie/tree/master/examples/react17\")}>\n        仓库地址\n      </Button>\n    </p>\n  </div>\n);\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <Router basename={basename}>\n          <div>\n            <nav>\n              <NavLink to=\"/home\">首页</NavLink> | <NavLink to=\"/dialog\">弹窗</NavLink> |{\" \"}\n              <NavLink to=\"/location\">路由</NavLink> | <NavLink to=\"/communication\">通信</NavLink> |{\" \"}\n              <NavLink to=\"/state\">状态</NavLink>\n\n            </nav>\n            <img src={logo} className=\"App-logo\" alt=\"logo\" />\n\n            <Switch>\n              <Route exact path=\"/home\">\n                <Home />\n              </Route>\n              <Route path=\"/dialog\">\n                <Dialog />\n              </Route>\n              <Route path=\"/location\">\n                <Location />\n              </Route>\n              <Route path=\"/communication\">\n                <Communication />\n              </Route>\n              <Route path=\"/state\">\n                <State />\n              </Route>\n              <Route exact path=\"/\">\n                <Redirect to=\"/home\" />\n              </Route>\n            </Switch>\n          </div>\n        </Router>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport \"./index.css\";\n\nReactDOM.render(\n  // 严格模式，antd的弹窗会warning\n    <App />,\n  document.getElementById(\"root\")\n);\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}